<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"> 
<html xmlns="http://www.w3.org/1999/xhtml"
	  xmlns:f="http://java.sun.com/jsf/core"
	  xmlns:h="http://java.sun.com/jsf/html"
	  xmlns:c="http://java.sun.com/jsp/jstl/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:plct="http://www.powerlogic.com.br/plct" >
	<h:head>
		<title>
			<ui:insert name="plc-titulo">
				<c:set var="msgKey" value="#{plcAliasPrefixoAction}.titulo"/>
				#{plct:execOneArg(plcComponenteVisual,'getMensagem', msgKey)}
			</ui:insert>
		</title>
		<ui:insert name="plc-config">
			
		</ui:insert>
				
		<ui:insert name="plc-cabecalho">
			<ui:include src="/WEB-INF/fcls-plc/geralHeaderPlc.xhtml" />
		</ui:insert>
		
		<c:set var="layoutPlc" value="#{ not empty param['layoutPlc'] ? param['layoutPlc'] : (not empty requestScope.layoutPlc) ? requestScope.layoutPlc : sessionScope.SESSION_CACHE.layout}"/>
		<c:set var="layoutReduzidoPlc" value="#{(not empty requestScope.layoutReduzidoPlc) ? requestScope.layoutReduzidoPlc : sessionScope.SESSION_CACHE.indLayoutReduzido}"/>
		
	</h:head>
	<h:body id="corpo_geral" onload="iniciarPagina();" >
		<div id="app">
			<c:if test="#{param.modoJanelaPlc != 'modal' and layoutReduzidoPlc == 'N' and param['laysc'] != 's' and requestScope.SELECAO_POPUP != 'S'}">
			<div id="plc-topo" class="ui-widget ui-widget-header ui-corner-top plc-topo
				#{layoutPlc!='sistema'?'plc-topo-classico':''}">
				<!-- #inicio-ajax-plc-topo# -->	
				<ui:insert name="plc-topo"><ui:include src="/WEB-INF/fcls-plc/geralTopoPlc.xhtml" /></ui:insert>
				<!-- #fim-ajax-plc-topo# -->	
			</div>	
			</c:if>
			<c:if test="#{(layoutPlc!='oriental' and layoutPlc!='orientalex') and param.modoJanelaPlc != 'modal' and requestScope.SELECAO_POPUP != 'S'}">
			<ui:insert name="plc-menu">
				<script language="javascript">
				//<![CDATA[
				/* Fix Menus Antigos! */
				jQuery(function(){
					var lis = [];
					jQuery('div.plc-menu').children().each(function(){
						var it = jQuery(this);
						if (it.is('a')) {
							it.attr('class', '');
							var li = jQuery('<li/>');
							var ul = it.next();
							li.append(it.remove());
							if (ul.is('ul')) {
								li.append(ul.css('class', 'ui-state-hover').remove());
							}
							lis.push(li.get());
						} else if (it.is('li')) {
							lis.push(this);
						}
					});
					if (jQuery('div.plc-menu > ul').length == 0) {
						jQuery('div.plc-menu').append('<ul/>');
					}
					jQuery.each(lis, function(){
						jQuery('div.plc-menu > ul').append(this);
					})
				});
				//]]>
				</script>
				<c:if test="#{param['laysc']!= 's'}">
					<c:if test="#{layoutPlc=='sistema'}">
						<ui:include src="/fcls/template/PlcMenuPullDownSubTemplate.xhtml" />
					</c:if>
					<c:if test="#{layoutPlc!='sistema'}">
						<ui:include src="/fcls/template/PlcMenuClassicoSubTemplate.xhtml" />
					</c:if>
				</c:if>
			</ui:insert>
			</c:if>
			<div id="plc-corpo" class="ui-widget ui-widget-content plc-corpo 
					#{(layoutPlc=='oriental' or layoutPlc=='orientalex') and !(param.modoJanelaPlc == 'popup' and layoutReduzidoPlc == 'N' and param['laysc'] != 's') ? 'plc-corpo-oriental':''}
					#{(layoutPlc=='classico' or layoutPlc=='classicoex') and !(param.modoJanelaPlc == 'popup' and layoutReduzidoPlc == 'N' and param['laysc'] != 's') ? 'plc-corpo-classico':''}
					#{(param.modoJanelaPlc == 'popup' or param.modoJanelaPlc == 'modal') and layoutReduzidoPlc == 'N' and param['laysc'] != 's' ?' plc-corpo-popup ':''}">
				<!-- #inicio-ajax-plc-corpo# -->				
				<f:view>
					<f:subview id="corpo">
						<ui:insert name="plc-corpo"><ui:include src="/fcls/template/PlcFormSubTemplate.xhtml"/></ui:insert>
					</f:subview>
				</f:view>
				<!-- #fim-ajax-plc-corpo# -->
			</div>		
			<c:if test="#{param['laysc']!= 's'}">
				<c:if test="#{(layoutPlc=='oriental' or layoutPlc=='orientalex') and param.modoJanelaPlc != 'modal' and requestScope.SELECAO_POPUP != 'S'}">
					<ui:insert name="plc-menu">
							<ui:include src="/fcls/template/PlcMenuClassicoSubTemplate.xhtml" />
					</ui:insert>
				</c:if>
			</c:if>
			<c:if test="#{param.modoJanelaPlc != 'modal' and layoutReduzidoPlc == 'N' and param['laysc'] != 's' and requestScope.SELECAO_POPUP != 'S'}">
				<div id="plc-rodape" class="ui-widget ui-widget-header ui-corner-bottom plc-rodape #{layoutPlc!='sistema'?'plc-rodape-classico':''}">
					<ui:insert name="plc-rodape"><ui:include src="/fcls/template/PlcRodapeSubTemplate.xhtml" /></ui:insert>
				</div>
			</c:if>
			<!-- Tag comentada durante uso do Trinidad Alfa. Testar seu uso com a implementacao final. 
			<ui:debug rendered="#{initParam.modoExecucao != 'P'}" />
			-->
		</div>
	</h:body>
</html>
